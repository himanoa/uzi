<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><meta name="viewport" content="width=device-width, initial-scale=1" /><title>Effectful.Concurrent.STM</title><link href="linuwial.css" rel="stylesheet" type="text/css" title="Linuwial" /><link rel="stylesheet" type="text/css" href="quick-jump.css" /><link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=PT+Sans:400,400i,700" /><script src="haddock-bundle.min.js" async="async" type="text/javascript"></script><script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { processClass: "mathjax", ignoreClass: ".*" } });</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script></head><body><div id="package-header"><span class="caption">effectful-2.3.0.0: An easy to use, performant extensible effects library.</span><ul class="links" id="page-menu"><li><a href="src/Effectful.Concurrent.STM.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>Safe-Inferred</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Effectful.Concurrent.STM</p></div><div id="table-of-contents"><div id="contents-list"><p class="caption" onclick="window.scrollTo(0,0)">Contents</p><ul><li><a href="#g:1">Effect</a><ul><li><a href="#g:2">Handlers</a></li></ul></li><li><a href="#g:3">Core</a></li><li><a href="#g:4">TVar</a></li><li><a href="#g:5">TMVar</a></li><li><a href="#g:6">TChan</a></li><li><a href="#g:7">TQueue</a></li><li><a href="#g:8">TBQueue</a></li></ul></div></div><div id="description"><p class="caption">Description</p><div class="doc"><p>Lifted <a href="../stm-2.5.1.0/Control-Concurrent-STM.html">Control.Concurrent.STM</a>.</p></div></div><div id="synopsis"><details id="syn"><summary>Synopsis</summary><ul class="details-toggle" data-details-id="syn"><li class="src short"><span class="keyword">data</span> <a href="#t:Concurrent">Concurrent</a> :: <a href="../effectful-core-2.3.0.1/Effectful.html#t:Effect" title="Effectful">Effect</a></li><li class="src short"><a href="#v:runConcurrent">runConcurrent</a> :: <a href="../effectful-core-2.3.0.1/Effectful.html#t:IOE" title="Effectful">IOE</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> (<a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> : es) a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es a</li><li class="src short"><span class="keyword">data</span> <a href="#t:STM">STM</a> a</li><li class="src short"><a href="#v:atomically">atomically</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es a</li><li class="src short"><a href="#v:retry">retry</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:orElse">orElse</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:check">check</a> :: <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:throwSTM">throwSTM</a> :: <a href="../base-4.18.2.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; e -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:catchSTM">catchSTM</a> :: <a href="../base-4.18.2.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; (e -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><span class="keyword">data</span> <a href="#t:TVar">TVar</a> a</li><li class="src short"><a href="#v:newTVarIO">newTVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a)</li><li class="src short"><a href="#v:readTVarIO">readTVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es a</li><li class="src short"><a href="#v:newTVar">newTVar</a> :: a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a)</li><li class="src short"><a href="#v:readTVar">readTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:writeTVar">writeTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:modifyTVar">modifyTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; (a -&gt; a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:modifyTVar-39-">modifyTVar'</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; (a -&gt; a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:swapTVar">swapTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:registerDelay">registerDelay</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../base-4.18.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>)</li><li class="src short"><a href="#v:mkWeakTVar">mkWeakTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es () -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="../base-4.18.2.0/System-Mem-Weak.html#t:Weak" title="System.Mem.Weak">Weak</a> (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a))</li><li class="src short"><span class="keyword">data</span> <a href="#t:TMVar">TMVar</a> a</li><li class="src short"><a href="#v:newTMVar">newTMVar</a> :: a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a)</li><li class="src short"><a href="#v:newEmptyTMVar">newEmptyTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a)</li><li class="src short"><a href="#v:newTMVarIO">newTMVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a)</li><li class="src short"><a href="#v:newEmptyTMVarIO">newEmptyTMVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a)</li><li class="src short"><a href="#v:takeTMVar">takeTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:putTMVar">putTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:readTMVar">readTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryReadTMVar">tryReadTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:swapTMVar">swapTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryTakeTMVar">tryTakeTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:tryPutTMVar">tryPutTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isEmptyTMVar">isEmptyTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:mkWeakTMVar">mkWeakTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es () -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="../base-4.18.2.0/System-Mem-Weak.html#t:Weak" title="System.Mem.Weak">Weak</a> (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a))</li><li class="src short"><span class="keyword">data</span> <a href="#t:TChan">TChan</a> a</li><li class="src short"><a href="#v:newTChan">newTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a)</li><li class="src short"><a href="#v:newTChanIO">newTChanIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a)</li><li class="src short"><a href="#v:newBroadcastTChan">newBroadcastTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a)</li><li class="src short"><a href="#v:newBroadcastTChanIO">newBroadcastTChanIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a)</li><li class="src short"><a href="#v:dupTChan">dupTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a)</li><li class="src short"><a href="#v:cloneTChan">cloneTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a)</li><li class="src short"><a href="#v:readTChan">readTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryReadTChan">tryReadTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:peekTChan">peekTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryPeekTChan">tryPeekTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:writeTChan">writeTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:unGetTChan">unGetTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:isEmptyTChan">isEmptyTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TQueue">TQueue</a> a</li><li class="src short"><a href="#v:newTQueue">newTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a)</li><li class="src short"><a href="#v:newTQueueIO">newTQueueIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a)</li><li class="src short"><a href="#v:readTQueue">readTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryReadTQueue">tryReadTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:peekTQueue">peekTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryPeekTQueue">tryPeekTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:flushTQueue">flushTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> [a]</li><li class="src short"><a href="#v:writeTQueue">writeTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:unGetTQueue">unGetTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:isEmptyTQueue">isEmptyTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:TBQueue">TBQueue</a> a</li><li class="src short"><a href="#v:newTBQueue">newTBQueue</a> :: <a href="../base-4.18.2.0/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a> -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a)</li><li class="src short"><a href="#v:newTBQueueIO">newTBQueueIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../base-4.18.2.0/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a> -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a)</li><li class="src short"><a href="#v:readTBQueue">readTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryReadTBQueue">tryReadTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:peekTBQueue">peekTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</li><li class="src short"><a href="#v:tryPeekTBQueue">tryPeekTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a)</li><li class="src short"><a href="#v:flushTBQueue">flushTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> [a]</li><li class="src short"><a href="#v:writeTBQueue">writeTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:unGetTBQueue">unGetTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> ()</li><li class="src short"><a href="#v:lengthTBQueue">lengthTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a></li><li class="src short"><a href="#v:isEmptyTBQueue">isEmptyTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li><li class="src short"><a href="#v:isFullTBQueue">isFullTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a></li></ul></details></div><div id="interface"><a href="#g:1" id="g:1"><h1>Effect</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Concurrent" class="def">Concurrent</a> :: <a href="../effectful-core-2.3.0.1/Effectful.html#t:Effect" title="Effectful">Effect</a> <a href="src/Effectful.Concurrent.Effect.html#Concurrent" class="link">Source</a> <a href="#t:Concurrent" class="selflink">#</a></p><div class="doc"><p>Provide the ability to run <code><a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a></code> computations concurrently in multiple
 threads and communicate between them.</p><p><em>Warning:</em> unless you stick to high level functions from the
 <code><a href="Effectful-Concurrent-Async.html#v:withAsync" title="Effectful.Concurrent.Async">withAsync</a></code> family, the <code><a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a></code> effect makes
 it possible to escape the scope of any scoped effect operation. Consider the
 following:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Effectful.Reader.Static as R
</code></strong></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>printAsk msg = liftIO . putStrLn . (msg ++) . (&quot;: &quot; ++) =&lt;&lt; R.ask
</code></strong></pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  runEff . R.runReader &quot;GLOBAL&quot; . runConcurrent $ do
    a &lt;- R.local (const &quot;LOCAL&quot;) $ do
      a &lt;- async $ do
        printAsk &quot;child (first)&quot;
        threadDelay 20000
        printAsk &quot;child (second)&quot;
      threadDelay 10000
      printAsk &quot;parent (inside)&quot;
      pure a
    printAsk &quot;parent (outside)&quot;
    wait a
:}
child (first): LOCAL
parent (inside): LOCAL
parent (outside): GLOBAL
child (second): LOCAL
</pre><p>Note that the asynchronous computation doesn't respect the scope of
 <code><a href="../effectful-core-2.3.0.1/Effectful-Reader-Static.html#v:local" title="Effectful.Reader.Static">local</a></code>, i.e. the child thread still behaves like
 it's inside the <code><a href="../effectful-core-2.3.0.1/Effectful-Reader-Static.html#v:local" title="Effectful.Reader.Static">local</a></code> block, even though the parent
 thread already got out of it.</p><p>This is because the value provided by the <code><a href="../effectful-core-2.3.0.1/Effectful-Reader-Static.html#t:Reader" title="Effectful.Reader.Static">Reader</a></code>
 effect is thread local, i.e. each thread manages its own version of it. For
 the <code><a href="../effectful-core-2.3.0.1/Effectful-Reader-Static.html#t:Reader" title="Effectful.Reader.Static">Reader</a></code> it is the only reasonable behavior, it
 wouldn't be very useful if its &quot;read only&quot; value was affected by calls to
 <code><a href="../effectful-core-2.3.0.1/Effectful-Reader-Static.html#v:local" title="Effectful.Reader.Static">local</a></code> from its parent or child threads.</p><p>However, the cut isn't so clear if it comes to effects that provide access to
 a mutable state. That's why statically dispatched <code>State</code> and <code>Writer</code>
 effects come in two flavors, local and shared:</p><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Effectful.State.Static.Local as SL
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  runEff . SL.execState &quot;Hi&quot; . runConcurrent $ do
    replicateConcurrently_ 3 $ SL.modify (++ &quot;!&quot;)
:}
&quot;Hi&quot;
</pre><pre class="screen"><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>import qualified Effectful.State.Static.Shared as SS
</code></strong><code class="prompt">&gt;&gt;&gt; </code><strong class="userinput"><code>:{
</code></strong>  runEff . SS.execState &quot;Hi&quot; . runConcurrent $ do
    replicateConcurrently_ 3 $ SS.modify (++ &quot;!&quot;)
:}
&quot;Hi!!!&quot;
</pre><p>In the first example state updates made concurrently are not reflected in the
 parent thread because the value is thread local, but in the second example
 they are, because the value is shared.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:Concurrent">Instances</h4><details id="i:Concurrent" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Concurrent:DispatchOf:1"></span> <span class="keyword">type</span> <a href="../effectful-core-2.3.0.1/Effectful.html#t:DispatchOf" title="Effectful">DispatchOf</a> <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a></span> <a href="src/Effectful.Concurrent.Effect.html#line-77" class="link">Source</a> <a href="#t:Concurrent" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Concurrent:DispatchOf:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Effectful-Concurrent-Effect.html">Effectful.Concurrent.Effect</a></p> <div class="src"><span class="keyword">type</span> <a href="../effectful-core-2.3.0.1/Effectful.html#t:DispatchOf" title="Effectful">DispatchOf</a> <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> = '<a href="../effectful-core-2.3.0.1/Effectful.html#v:Static" title="Effectful">Static</a> '<a href="../effectful-core-2.3.0.1/Effectful-Dispatch-Static.html#v:WithSideEffects" title="Effectful.Dispatch.Static">WithSideEffects</a></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:Concurrent:StaticRep:2"></span> <span class="keyword">data</span> <a href="../effectful-core-2.3.0.1/Effectful-Dispatch-Static.html#t:StaticRep" title="Effectful.Dispatch.Static">StaticRep</a> <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a></span> <a href="src/Effectful.Concurrent.Effect.html#line-78" class="link">Source</a> <a href="#t:Concurrent" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:Concurrent:StaticRep:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="Effectful-Concurrent-Effect.html">Effectful.Concurrent.Effect</a></p> <div class="src"><span class="keyword">data</span> <a href="../effectful-core-2.3.0.1/Effectful-Dispatch-Static.html#t:StaticRep" title="Effectful.Dispatch.Static">StaticRep</a> <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> = <a id="v:Concurrent" class="def">Concurrent</a></div></details></td></tr></table></details></div></div><a href="#g:2" id="g:2"><h2>Handlers</h2></a><div class="top"><p class="src"><a id="v:runConcurrent" class="def">runConcurrent</a> :: <a href="../effectful-core-2.3.0.1/Effectful.html#t:IOE" title="Effectful">IOE</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> (<a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> : es) a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es a <a href="src/Effectful.Concurrent.Effect.html#runConcurrent" class="link">Source</a> <a href="#v:runConcurrent" class="selflink">#</a></p><div class="doc"><p>Run the <code><a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a></code> effect.</p></div></div><a href="#g:3" id="g:3"><h1>Core</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:STM" class="def">STM</a> a <a href="#t:STM" class="selflink">#</a></p><div class="doc"><p>A monad supporting atomic memory transactions.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:STM">Instances</h4><details id="i:STM" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Alternative:1"></span> <a href="../base-4.18.2.0/Control-Applicative.html#t:Alternative" title="Control.Applicative">Alternative</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></span></td><td class="doc"><p>Takes the first non-<code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>ing <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code> action.</p><p><em>Since: base-4.8.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Alternative:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:empty">empty</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:empty" class="selflink">#</a></p><p class="src"><a href="#v:-60--124--62-">(&lt;|&gt;)</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:-60--124--62-" class="selflink">#</a></p><p class="src"><a href="#v:some">some</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> [a] <a href="#v:some" class="selflink">#</a></p><p class="src"><a href="#v:many">many</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> [a] <a href="#v:many" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Applicative:2"></span> <a href="../base-4.18.2.0/Control-Applicative.html#t:Applicative" title="Control.Applicative">Applicative</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></span></td><td class="doc"><p><em>Since: base-4.8.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Applicative:2"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:pure">pure</a> :: a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:pure" class="selflink">#</a></p><p class="src"><a href="#v:-60--42--62-">(&lt;*&gt;)</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (a -&gt; b) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b <a href="#v:-60--42--62-" class="selflink">#</a></p><p class="src"><a href="#v:liftA2">liftA2</a> :: (a -&gt; b -&gt; c) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> c <a href="#v:liftA2" class="selflink">#</a></p><p class="src"><a href="#v:-42--62-">(*&gt;)</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b <a href="#v:-42--62-" class="selflink">#</a></p><p class="src"><a href="#v:-60--42-">(&lt;*)</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:-60--42-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Functor:3"></span> <a href="../base-4.18.2.0/Data-Functor.html#t:Functor" title="Data.Functor">Functor</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></span></td><td class="doc"><p><em>Since: base-4.3.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Functor:3"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fmap">fmap</a> :: (a -&gt; b) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b <a href="#v:fmap" class="selflink">#</a></p><p class="src"><a href="#v:-60--36-">(&lt;$)</a> :: a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:-60--36-" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Monad:4"></span> <a href="../base-4.18.2.0/Control-Monad.html#t:Monad" title="Control.Monad">Monad</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></span></td><td class="doc"><p><em>Since: base-4.3.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Monad:4"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-62--62--61-">(&gt;&gt;=)</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; (a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b <a href="#v:-62--62--61-" class="selflink">#</a></p><p class="src"><a href="#v:-62--62-">(&gt;&gt;)</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> b <a href="#v:-62--62-" class="selflink">#</a></p><p class="src"><a href="#v:return">return</a> :: a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:return" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:MonadPlus:5"></span> <a href="../base-4.18.2.0/Control-Monad.html#t:MonadPlus" title="Control.Monad">MonadPlus</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></span></td><td class="doc"><p>Takes the first non-<code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>ing <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code> action.</p><p><em>Since: base-4.3.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:MonadPlus:5"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mzero">mzero</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:mzero" class="selflink">#</a></p><p class="src"><a href="#v:mplus">mplus</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:mplus" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:MonadBaseControl:6"></span> <a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html#t:MonadBaseControl" title="Control.Monad.Trans.Control">MonadBaseControl</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:STM:MonadBaseControl:6"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html">Control.Monad.Trans.Control</a></p> <div class="subs associated-types"><p class="caption">Associated Types</p><p class="src"><span class="keyword">type</span> <a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#t:StM" class="selflink">#</a></p></div> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:liftBaseWith">liftBaseWith</a> :: (<a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html#t:RunInBase" title="Control.Monad.Trans.Control">RunInBase</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:liftBaseWith" class="selflink">#</a></p><p class="src"><a href="#v:restoreM">restoreM</a> :: <a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:restoreM" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Monoid:7"></span> <a href="../base-4.18.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> a =&gt; <a href="../base-4.18.2.0/Data-Monoid.html#t:Monoid" title="Data.Monoid">Monoid</a> (<a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a)</span></td><td class="doc"><p><em>Since: base-4.17.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Monoid:7"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a] -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:mconcat" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:Semigroup:8"></span> <a href="../base-4.18.2.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> a =&gt; <a href="../base-4.18.2.0/Prelude.html#t:Semigroup" title="Prelude">Semigroup</a> (<a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a)</span></td><td class="doc"><p><em>Since: base-4.17.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:STM:Semigroup:8"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-60--62-">(&lt;&gt;)</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:-60--62-" class="selflink">#</a></p><p class="src"><a href="#v:sconcat">sconcat</a> :: <a href="../base-4.18.2.0/Data-List-NonEmpty.html#t:NonEmpty" title="Data.List.NonEmpty">NonEmpty</a> (<a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:sconcat" class="selflink">#</a></p><p class="src"><a href="#v:stimes">stimes</a> :: <a href="../base-4.18.2.0/Prelude.html#t:Integral" title="Prelude">Integral</a> b =&gt; b -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:stimes" class="selflink">#</a></p></div></details></td></tr><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:STM:StM:9"></span> <span class="keyword">type</span> <a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:STM:StM:9"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html">Control.Monad.Trans.Control</a></p> <div class="src"><span class="keyword">type</span> <a href="../monad-control-1.0.3.1/Control-Monad-Trans-Control.html#t:StM" title="Control.Monad.Trans.Control">StM</a> <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a = a</div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:atomically" class="def">atomically</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es a <a href="src/Effectful.Concurrent.STM.html#atomically" class="link">Source</a> <a href="#v:atomically" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../base-4.18.2.0/GHC-Conc.html#v:atomically" title="GHC.Conc">atomically</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:retry" class="def">retry</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:retry" class="selflink">#</a></p><div class="doc"><p>Retry execution of the current memory transaction because it has seen
 values in <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code>s which mean that it should not continue (e.g. the <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code>s
 represent a shared buffer that is now empty).  The implementation may
 block the thread until one of the <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code>s that it has read from has been
 updated. (GHC only)</p></div></div><div class="top"><p class="src"><a id="v:orElse" class="def">orElse</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:orElse" class="selflink">#</a></p><div class="doc"><p>Compose two alternative STM actions (GHC only).</p><p>If the first action completes without retrying then it forms the result of
 the <code><a href="Effectful-Concurrent-STM.html#v:orElse" title="Effectful.Concurrent.STM">orElse</a></code>. Otherwise, if the first action retries, then the second action
 is tried in its place. If both actions retry then the <code><a href="Effectful-Concurrent-STM.html#v:orElse" title="Effectful.Concurrent.STM">orElse</a></code> as a whole
 retries.</p></div></div><div class="top"><p class="src"><a id="v:check" class="def">check</a> :: <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:check" class="selflink">#</a></p><div class="doc"><p>Check that the boolean condition is true and, if not, <code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>.</p><p>In other words, <code>check b = unless b retry</code>.</p><p><em>Since: stm-2.1.1</em></p></div></div><div class="top"><p class="src"><a id="v:throwSTM" class="def">throwSTM</a> :: <a href="../base-4.18.2.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; e -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:throwSTM" class="selflink">#</a></p><div class="doc"><p>A variant of <code><a href="../base-4.18.2.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code> that can only be used within the <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code> monad.</p><p>Throwing an exception in <code>STM</code> aborts the transaction and propagates the
 exception. If the exception is caught via <code><a href="Effectful-Concurrent-STM.html#v:catchSTM" title="Effectful.Concurrent.STM">catchSTM</a></code>, only the changes
 enclosed by the catch are rolled back; changes made outside of <code><a href="Effectful-Concurrent-STM.html#v:catchSTM" title="Effectful.Concurrent.STM">catchSTM</a></code>
 persist.</p><p>If the exception is not caught inside of the <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code>, it is re-thrown by
 <code><a href="../base-4.18.2.0/GHC-Conc.html#v:atomically" title="GHC.Conc">atomically</a></code>, and the entire <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code> is rolled back.</p><p>Although <code><a href="Effectful-Concurrent-STM.html#v:throwSTM" title="Effectful.Concurrent.STM">throwSTM</a></code> has a type that is an instance of the type of <code><a href="../base-4.18.2.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code>, the
 two functions are subtly different:</p><pre>throw e    `seq` x  ===&gt; throw e
throwSTM e `seq` x  ===&gt; x</pre><p>The first example will cause the exception <code>e</code> to be raised,
 whereas the second one won't.  In fact, <code><a href="Effectful-Concurrent-STM.html#v:throwSTM" title="Effectful.Concurrent.STM">throwSTM</a></code> will only cause
 an exception to be raised when it is used within the <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code> monad.
 The <code><a href="Effectful-Concurrent-STM.html#v:throwSTM" title="Effectful.Concurrent.STM">throwSTM</a></code> variant should be used in preference to <code><a href="../base-4.18.2.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code> to
 raise an exception within the <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code> monad because it guarantees
 ordering with respect to other <code><a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a></code> operations, whereas <code><a href="../base-4.18.2.0/Control-Exception-Base.html#v:throw" title="Control.Exception.Base">throw</a></code>
 does not.</p></div></div><div class="top"><p class="src"><a id="v:catchSTM" class="def">catchSTM</a> :: <a href="../base-4.18.2.0/Control-Exception-Base.html#t:Exception" title="Control.Exception.Base">Exception</a> e =&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a -&gt; (e -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:catchSTM" class="selflink">#</a></p><div class="doc"><p>Exception handling within STM actions.</p><p><code><code><a href="Effectful-Concurrent-STM.html#v:catchSTM" title="Effectful.Concurrent.STM">catchSTM</a></code> m f</code> catches any exception thrown by <code>m</code> using <code><a href="Effectful-Concurrent-STM.html#v:throwSTM" title="Effectful.Concurrent.STM">throwSTM</a></code>,
 using the function <code>f</code> to handle the exception. If an exception is
 thrown, any changes made by <code>m</code> are rolled back, but changes prior to
 <code>m</code> persist.</p></div></div><a href="#g:4" id="g:4"><h1>TVar</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TVar" class="def">TVar</a> a <a href="#t:TVar" class="selflink">#</a></p><div class="doc"><p>Shared memory locations that support atomic memory transactions.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TVar">Instances</h4><details id="i:TVar" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TVar:Eq:1"></span> <a href="../base-4.18.2.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a)</span></td><td class="doc"><p><em>Since: base-4.8.0.0</em></p></td></tr><tr><td colspan="2"><details id="i:id:TVar:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../base-4.18.2.0/GHC-Conc-Sync.html">GHC.Conc.Sync</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:newTVarIO" class="def">newTVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a) <a href="src/Effectful.Concurrent.STM.html#newTVarIO" class="link">Source</a> <a href="#v:newTVarIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../base-4.18.2.0/GHC-Conc.html#v:newTVarIO" title="GHC.Conc">newTVarIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:readTVarIO" class="def">readTVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es a <a href="src/Effectful.Concurrent.STM.html#readTVarIO" class="link">Source</a> <a href="#v:readTVarIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../base-4.18.2.0/GHC-Conc.html#v:readTVarIO" title="GHC.Conc">readTVarIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:newTVar" class="def">newTVar</a> :: a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a) <a href="#v:newTVar" class="selflink">#</a></p><div class="doc"><p>Create a new <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code> holding a value supplied</p></div></div><div class="top"><p class="src"><a id="v:readTVar" class="def">readTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:readTVar" class="selflink">#</a></p><div class="doc"><p>Return the current value stored in a <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:writeTVar" class="def">writeTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:writeTVar" class="selflink">#</a></p><div class="doc"><p>Write the supplied value into a <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:modifyTVar" class="def">modifyTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; (a -&gt; a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:modifyTVar" class="selflink">#</a></p><div class="doc"><p>Mutate the contents of a <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code>. <em>N.B.</em>, this version is
 non-strict.</p><p><em>Since: stm-2.3</em></p></div></div><div class="top"><p class="src"><a id="v:modifyTVar-39-" class="def">modifyTVar'</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; (a -&gt; a) -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:modifyTVar-39-" class="selflink">#</a></p><div class="doc"><p>Strict version of <code><a href="Effectful-Concurrent-STM.html#v:modifyTVar" title="Effectful.Concurrent.STM">modifyTVar</a></code>.</p><p><em>Since: stm-2.3</em></p></div></div><div class="top"><p class="src"><a id="v:swapTVar" class="def">swapTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:swapTVar" class="selflink">#</a></p><div class="doc"><p>Swap the contents of a <code><a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a></code> for a new value.</p><p><em>Since: stm-2.3</em></p></div></div><div class="top"><p class="src"><a id="v:registerDelay" class="def">registerDelay</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../base-4.18.2.0/Data-Int.html#t:Int" title="Data.Int">Int</a> -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a>) <a href="src/Effectful.Concurrent.STM.html#registerDelay" class="link">Source</a> <a href="#v:registerDelay" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../base-4.18.2.0/GHC-Conc.html#v:registerDelay" title="GHC.Conc">registerDelay</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:mkWeakTVar" class="def">mkWeakTVar</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es () -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="../base-4.18.2.0/System-Mem-Weak.html#t:Weak" title="System.Mem.Weak">Weak</a> (<a href="Effectful-Concurrent-STM.html#t:TVar" title="Effectful.Concurrent.STM">TVar</a> a)) <a href="src/Effectful.Concurrent.STM.html#mkWeakTVar" class="link">Source</a> <a href="#v:mkWeakTVar" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TVar.html#v:mkWeakTVar" title="Control.Concurrent.STM.TVar">mkWeakTVar</a></code>.</p></div></div><a href="#g:5" id="g:5"><h1>TMVar</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TMVar" class="def">TMVar</a> a <a href="#t:TMVar" class="selflink">#</a></p><div class="doc"><p>A <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> is a synchronising variable, used
for communication between concurrent threads.  It can be thought of
as a box, which may be empty or full.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TMVar">Instances</h4><details id="i:TMVar" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TMVar:Eq:1"></span> <a href="../base-4.18.2.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TMVar:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../stm-2.5.1.0/Control-Concurrent-STM-TMVar.html">Control.Concurrent.STM.TMVar</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:newTMVar" class="def">newTMVar</a> :: a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a) <a href="#v:newTMVar" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> which contains the supplied value.</p></div></div><div class="top"><p class="src"><a id="v:newEmptyTMVar" class="def">newEmptyTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a) <a href="#v:newEmptyTMVar" class="selflink">#</a></p><div class="doc"><p>Create a <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> which is initially empty.</p></div></div><div class="top"><p class="src"><a id="v:newTMVarIO" class="def">newTMVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a) <a href="src/Effectful.Concurrent.STM.html#newTMVarIO" class="link">Source</a> <a href="#v:newTMVarIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TMVar.html#v:newTMVarIO" title="Control.Concurrent.STM.TMVar">newTMVarIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:newEmptyTMVarIO" class="def">newEmptyTMVarIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a) <a href="src/Effectful.Concurrent.STM.html#newEmptyTMVarIO" class="link">Source</a> <a href="#v:newEmptyTMVarIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TMVar.html#v:newEmptyTMVarIO" title="Control.Concurrent.STM.TMVar">newEmptyTMVarIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:takeTMVar" class="def">takeTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:takeTMVar" class="selflink">#</a></p><div class="doc"><p>Return the contents of the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code>.  If the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> is currently
 empty, the transaction will <code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>.  After a <code><a href="Effectful-Concurrent-STM.html#v:takeTMVar" title="Effectful.Concurrent.STM">takeTMVar</a></code>,
 the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> is left empty.</p></div></div><div class="top"><p class="src"><a id="v:putTMVar" class="def">putTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:putTMVar" class="selflink">#</a></p><div class="doc"><p>Put a value into a <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code>.  If the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> is currently full,
 <code><a href="Effectful-Concurrent-STM.html#v:putTMVar" title="Effectful.Concurrent.STM">putTMVar</a></code> will <code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:readTMVar" class="def">readTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:readTMVar" class="selflink">#</a></p><div class="doc"><p>This is a combination of <code><a href="Effectful-Concurrent-STM.html#v:takeTMVar" title="Effectful.Concurrent.STM">takeTMVar</a></code> and <code><a href="Effectful-Concurrent-STM.html#v:putTMVar" title="Effectful.Concurrent.STM">putTMVar</a></code>; ie. it
 takes the value from the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code>, puts it back, and also returns
 it.</p></div></div><div class="top"><p class="src"><a id="v:tryReadTMVar" class="def">tryReadTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryReadTMVar" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:readTMVar" title="Effectful.Concurrent.STM">readTMVar</a></code> which does not retry. Instead it
 returns <code>Nothing</code> if no value is available.</p><p><em>Since: stm-2.3</em></p></div></div><div class="top"><p class="src"><a id="v:swapTMVar" class="def">swapTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:swapTMVar" class="selflink">#</a></p><div class="doc"><p>Swap the contents of a <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> for a new value.</p></div></div><div class="top"><p class="src"><a id="v:tryTakeTMVar" class="def">tryTakeTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryTakeTMVar" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:takeTMVar" title="Effectful.Concurrent.STM">takeTMVar</a></code> that does not <code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>.  The <code><a href="Effectful-Concurrent-STM.html#v:tryTakeTMVar" title="Effectful.Concurrent.STM">tryTakeTMVar</a></code>
 function returns <code><a href="../base-4.18.2.0/Data-Maybe.html#v:Nothing" title="Data.Maybe">Nothing</a></code> if the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> was empty, or <code><code><a href="../base-4.18.2.0/Data-Maybe.html#v:Just" title="Data.Maybe">Just</a></code> a</code> if
 the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> was full with contents <code>a</code>.  After <code><a href="Effectful-Concurrent-STM.html#v:tryTakeTMVar" title="Effectful.Concurrent.STM">tryTakeTMVar</a></code>, the
 <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> is left empty.</p></div></div><div class="top"><p class="src"><a id="v:tryPutTMVar" class="def">tryPutTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:tryPutTMVar" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:putTMVar" title="Effectful.Concurrent.STM">putTMVar</a></code> that does not <code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>.  The <code><a href="Effectful-Concurrent-STM.html#v:tryPutTMVar" title="Effectful.Concurrent.STM">tryPutTMVar</a></code>
 function attempts to put the value <code>a</code> into the <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code>, returning
 <code><a href="../base-4.18.2.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if it was successful, or <code><a href="../base-4.18.2.0/Data-Bool.html#v:False" title="Data.Bool">False</a></code> otherwise.</p></div></div><div class="top"><p class="src"><a id="v:isEmptyTMVar" class="def">isEmptyTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:isEmptyTMVar" class="selflink">#</a></p><div class="doc"><p>Check whether a given <code><a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a></code> is empty.</p></div></div><div class="top"><p class="src"><a id="v:mkWeakTMVar" class="def">mkWeakTMVar</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es () -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="../base-4.18.2.0/System-Mem-Weak.html#t:Weak" title="System.Mem.Weak">Weak</a> (<a href="Effectful-Concurrent-STM.html#t:TMVar" title="Effectful.Concurrent.STM">TMVar</a> a)) <a href="src/Effectful.Concurrent.STM.html#mkWeakTMVar" class="link">Source</a> <a href="#v:mkWeakTMVar" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TMVar.html#v:mkWeakTMVar" title="Control.Concurrent.STM.TMVar">mkWeakTMVar</a></code>.</p></div></div><a href="#g:6" id="g:6"><h1>TChan</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TChan" class="def">TChan</a> a <a href="#t:TChan" class="selflink">#</a></p><div class="doc"><p><code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code> is an abstract type representing an unbounded FIFO channel.</p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TChan">Instances</h4><details id="i:TChan" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TChan:Eq:1"></span> <a href="../base-4.18.2.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TChan:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../stm-2.5.1.0/Control-Concurrent-STM-TChan.html">Control.Concurrent.STM.TChan</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:newTChan" class="def">newTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a) <a href="#v:newTChan" class="selflink">#</a></p><div class="doc"><p>Build and return a new instance of <code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code></p></div></div><div class="top"><p class="src"><a id="v:newTChanIO" class="def">newTChanIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a) <a href="src/Effectful.Concurrent.STM.html#newTChanIO" class="link">Source</a> <a href="#v:newTChanIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TChan.html#v:newTChanIO" title="Control.Concurrent.STM.TChan">newTChanIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:newBroadcastTChan" class="def">newBroadcastTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a) <a href="#v:newBroadcastTChan" class="selflink">#</a></p><div class="doc"><p>Create a write-only <code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code>.  More precisely, <code><a href="Effectful-Concurrent-STM.html#v:readTChan" title="Effectful.Concurrent.STM">readTChan</a></code> will <code><a href="Effectful-Concurrent-STM.html#v:retry" title="Effectful.Concurrent.STM">retry</a></code>
 even after items have been written to the channel.  The only way to read
 a broadcast channel is to duplicate it with <code><a href="Effectful-Concurrent-STM.html#v:dupTChan" title="Effectful.Concurrent.STM">dupTChan</a></code>.</p><p>Consider a server that broadcasts messages to clients:</p><pre>serve :: TChan Message -&gt; Client -&gt; IO loop
serve broadcastChan client = do
    myChan &lt;- dupTChan broadcastChan
    forever $ do
        message &lt;- readTChan myChan
        send client message</pre><p>The problem with using <code><a href="Effectful-Concurrent-STM.html#v:newTChan" title="Effectful.Concurrent.STM">newTChan</a></code> to create the broadcast channel is that if
 it is only written to and never read, items will pile up in memory.  By
 using <code><a href="Effectful-Concurrent-STM.html#v:newBroadcastTChan" title="Effectful.Concurrent.STM">newBroadcastTChan</a></code> to create the broadcast channel, items can be
 garbage collected after clients have seen them.</p><p><em>Since: stm-2.4</em></p></div></div><div class="top"><p class="src"><a id="v:newBroadcastTChanIO" class="def">newBroadcastTChanIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a) <a href="src/Effectful.Concurrent.STM.html#newBroadcastTChanIO" class="link">Source</a> <a href="#v:newBroadcastTChanIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TChan.html#v:newBroadcastTChanIO" title="Control.Concurrent.STM.TChan">newBroadcastTChanIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:dupTChan" class="def">dupTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a) <a href="#v:dupTChan" class="selflink">#</a></p><div class="doc"><p>Duplicate a <code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code>: the duplicate channel begins empty, but data written to
 either channel from then on will be available from both.  Hence this creates
 a kind of broadcast channel, where data written by anyone is seen by
 everyone else.</p></div></div><div class="top"><p class="src"><a id="v:cloneTChan" class="def">cloneTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a) <a href="#v:cloneTChan" class="selflink">#</a></p><div class="doc"><p>Clone a <code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code>: similar to dupTChan, but the cloned channel starts with the
 same content available as the original channel.</p><p><em>Since: stm-2.4</em></p></div></div><div class="top"><p class="src"><a id="v:readTChan" class="def">readTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:readTChan" class="selflink">#</a></p><div class="doc"><p>Read the next value from the <code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:tryReadTChan" class="def">tryReadTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryReadTChan" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:readTChan" title="Effectful.Concurrent.STM">readTChan</a></code> which does not retry. Instead it
 returns <code>Nothing</code> if no value is available.</p><p><em>Since: stm-2.3</em></p></div></div><div class="top"><p class="src"><a id="v:peekTChan" class="def">peekTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:peekTChan" class="selflink">#</a></p><div class="doc"><p>Get the next value from the <code>TChan</code> without removing it,
 retrying if the channel is empty.</p><p><em>Since: stm-2.3</em></p></div></div><div class="top"><p class="src"><a id="v:tryPeekTChan" class="def">tryPeekTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryPeekTChan" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:peekTChan" title="Effectful.Concurrent.STM">peekTChan</a></code> which does not retry. Instead it
 returns <code>Nothing</code> if no value is available.</p><p><em>Since: stm-2.3</em></p></div></div><div class="top"><p class="src"><a id="v:writeTChan" class="def">writeTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:writeTChan" class="selflink">#</a></p><div class="doc"><p>Write a value to a <code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:unGetTChan" class="def">unGetTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:unGetTChan" class="selflink">#</a></p><div class="doc"><p>Put a data item back onto a channel, where it will be the next item read.</p></div></div><div class="top"><p class="src"><a id="v:isEmptyTChan" class="def">isEmptyTChan</a> :: <a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:isEmptyTChan" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.18.2.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the supplied <code><a href="Effectful-Concurrent-STM.html#t:TChan" title="Effectful.Concurrent.STM">TChan</a></code> is empty.</p></div></div><a href="#g:7" id="g:7"><h1>TQueue</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TQueue" class="def">TQueue</a> a <a href="#t:TQueue" class="selflink">#</a></p><div class="doc"><p><code><a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a></code> is an abstract type representing an unbounded FIFO channel.</p><p><em>Since: stm-2.4</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TQueue">Instances</h4><details id="i:TQueue" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TQueue:Eq:1"></span> <a href="../base-4.18.2.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TQueue:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../stm-2.5.1.0/Control-Concurrent-STM-TQueue.html">Control.Concurrent.STM.TQueue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:newTQueue" class="def">newTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a) <a href="#v:newTQueue" class="selflink">#</a></p><div class="doc"><p>Build and returns a new instance of <code><a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a></code></p></div></div><div class="top"><p class="src"><a id="v:newTQueueIO" class="def">newTQueueIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a) <a href="src/Effectful.Concurrent.STM.html#newTQueueIO" class="link">Source</a> <a href="#v:newTQueueIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TQueue.html#v:newTQueueIO" title="Control.Concurrent.STM.TQueue">newTQueueIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:readTQueue" class="def">readTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:readTQueue" class="selflink">#</a></p><div class="doc"><p>Read the next value from the <code><a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:tryReadTQueue" class="def">tryReadTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryReadTQueue" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:readTQueue" title="Effectful.Concurrent.STM">readTQueue</a></code> which does not retry. Instead it
 returns <code>Nothing</code> if no value is available.</p></div></div><div class="top"><p class="src"><a id="v:peekTQueue" class="def">peekTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:peekTQueue" class="selflink">#</a></p><div class="doc"><p>Get the next value from the <code>TQueue</code> without removing it,
 retrying if the channel is empty.</p></div></div><div class="top"><p class="src"><a id="v:tryPeekTQueue" class="def">tryPeekTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryPeekTQueue" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:peekTQueue" title="Effectful.Concurrent.STM">peekTQueue</a></code> which does not retry. Instead it
 returns <code>Nothing</code> if no value is available.</p></div></div><div class="top"><p class="src"><a id="v:flushTQueue" class="def">flushTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> [a] <a href="#v:flushTQueue" class="selflink">#</a></p><div class="doc"><p>Efficiently read the entire contents of a <code><a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a></code> into a list. This
 function never retries.</p><p><em>Since: stm-2.4.5</em></p></div></div><div class="top"><p class="src"><a id="v:writeTQueue" class="def">writeTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:writeTQueue" class="selflink">#</a></p><div class="doc"><p>Write a value to a <code><a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:unGetTQueue" class="def">unGetTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:unGetTQueue" class="selflink">#</a></p><div class="doc"><p>Put a data item back onto a channel, where it will be the next item read.</p></div></div><div class="top"><p class="src"><a id="v:isEmptyTQueue" class="def">isEmptyTQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:isEmptyTQueue" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.18.2.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the supplied <code><a href="Effectful-Concurrent-STM.html#t:TQueue" title="Effectful.Concurrent.STM">TQueue</a></code> is empty.</p></div></div><a href="#g:8" id="g:8"><h1>TBQueue</h1></a><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:TBQueue" class="def">TBQueue</a> a <a href="#t:TBQueue" class="selflink">#</a></p><div class="doc"><p><code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code> is an abstract type representing a bounded FIFO channel.</p><p><em>Since: stm-2.4</em></p></div><div class="subs instances"><h4 class="instances details-toggle-control details-toggle" data-details-id="i:TBQueue">Instances</h4><details id="i:TBQueue" open="open"><summary class="hide-when-js-enabled">Instances details</summary><table><tr><td class="src clearfix"><span class="inst-left"><span class="instance details-toggle-control details-toggle" data-details-id="i:id:TBQueue:Eq:1"></span> <a href="../base-4.18.2.0/Data-Eq.html#t:Eq" title="Data.Eq">Eq</a> (<a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a)</span></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><details id="i:id:TBQueue:Eq:1"><summary class="hide-when-js-enabled">Instance details</summary><p>Defined in <a href="../stm-2.5.1.0/Control-Concurrent-STM-TBQueue.html">Control.Concurrent.STM.TBQueue</a></p> <div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></details></td></tr></table></details></div></div><div class="top"><p class="src"><a id="v:newTBQueue" class="def">newTBQueue</a> <a href="#v:newTBQueue" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.18.2.0/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a></td><td class="doc"><p>maximum number of elements the queue can hold</p></td></tr><tr><td class="src">-&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a)</td><td class="doc empty">&nbsp;</td></tr></table></div><div class="doc"><p>Builds and returns a new instance of <code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:newTBQueueIO" class="def">newTBQueueIO</a> :: <a href="Effectful-Concurrent-STM.html#t:Concurrent" title="Effectful.Concurrent.STM">Concurrent</a> <a href="../effectful-core-2.3.0.1/Effectful.html#t::-62-" title="Effectful">:&gt;</a> es =&gt; <a href="../base-4.18.2.0/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a> -&gt; <a href="../effectful-core-2.3.0.1/Effectful.html#t:Eff" title="Effectful">Eff</a> es (<a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a) <a href="src/Effectful.Concurrent.STM.html#newTBQueueIO" class="link">Source</a> <a href="#v:newTBQueueIO" class="selflink">#</a></p><div class="doc"><p>Lifted <code><a href="../stm-2.5.1.0/Control-Concurrent-STM-TBQueue.html#v:newTBQueueIO" title="Control.Concurrent.STM.TBQueue">newTBQueueIO</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:readTBQueue" class="def">readTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:readTBQueue" class="selflink">#</a></p><div class="doc"><p>Read the next value from the <code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:tryReadTBQueue" class="def">tryReadTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryReadTBQueue" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:readTBQueue" title="Effectful.Concurrent.STM">readTBQueue</a></code> which does not retry. Instead it
 returns <code>Nothing</code> if no value is available.</p></div></div><div class="top"><p class="src"><a id="v:peekTBQueue" class="def">peekTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> a <a href="#v:peekTBQueue" class="selflink">#</a></p><div class="doc"><p>Get the next value from the <code>TBQueue</code> without removing it,
 retrying if the channel is empty.</p></div></div><div class="top"><p class="src"><a id="v:tryPeekTBQueue" class="def">tryPeekTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> (<a href="../base-4.18.2.0/Data-Maybe.html#t:Maybe" title="Data.Maybe">Maybe</a> a) <a href="#v:tryPeekTBQueue" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Effectful-Concurrent-STM.html#v:peekTBQueue" title="Effectful.Concurrent.STM">peekTBQueue</a></code> which does not retry. Instead it
 returns <code>Nothing</code> if no value is available.</p></div></div><div class="top"><p class="src"><a id="v:flushTBQueue" class="def">flushTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> [a] <a href="#v:flushTBQueue" class="selflink">#</a></p><div class="doc"><p>Efficiently read the entire contents of a <code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code> into a list. This
 function never retries.</p><p><em>Since: stm-2.4.5</em></p></div></div><div class="top"><p class="src"><a id="v:writeTBQueue" class="def">writeTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:writeTBQueue" class="selflink">#</a></p><div class="doc"><p>Write a value to a <code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code>; blocks if the queue is full.</p></div></div><div class="top"><p class="src"><a id="v:unGetTBQueue" class="def">unGetTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> () <a href="#v:unGetTBQueue" class="selflink">#</a></p><div class="doc"><p>Put a data item back onto a channel, where it will be the next item read.
 Blocks if the queue is full.</p></div></div><div class="top"><p class="src"><a id="v:lengthTBQueue" class="def">lengthTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Numeric-Natural.html#t:Natural" title="Numeric.Natural">Natural</a> <a href="#v:lengthTBQueue" class="selflink">#</a></p><div class="doc"><p>Return the length of a <code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code>.</p><p><em>Since: stm-2.5.0.0</em></p></div></div><div class="top"><p class="src"><a id="v:isEmptyTBQueue" class="def">isEmptyTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:isEmptyTBQueue" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.18.2.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the supplied <code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code> is empty.</p></div></div><div class="top"><p class="src"><a id="v:isFullTBQueue" class="def">isFullTBQueue</a> :: <a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a> a -&gt; <a href="Effectful-Concurrent-STM.html#t:STM" title="Effectful.Concurrent.STM">STM</a> <a href="../base-4.18.2.0/Data-Bool.html#t:Bool" title="Data.Bool">Bool</a> <a href="#v:isFullTBQueue" class="selflink">#</a></p><div class="doc"><p>Returns <code><a href="../base-4.18.2.0/Data-Bool.html#v:True" title="Data.Bool">True</a></code> if the supplied <code><a href="Effectful-Concurrent-STM.html#t:TBQueue" title="Effectful.Concurrent.STM">TBQueue</a></code> is full.</p><p><em>Since: stm-2.4.3</em></p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.29.2</p></div></body></html>